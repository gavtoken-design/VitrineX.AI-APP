import{h as s,o as J,k as e,A as F,C as T,G as K,H as Q,B as C,L as Y}from"./index-CYQb2vCA.js";import{T as ee}from"./Textarea-NzWuWU9_.js";import{I as ae}from"./Input-CqKjf13d.js";import{S as se,M as re}from"./MediaActionsToolbar-Bb4kA36I.js";import{d as U,e as te,f as oe,c as le,g as _,a as ie,S as ne,h as de,I as ce,i as me,V as ue}from"./constants-BAIO8zZj.js";import{g as xe,e as ge,a as pe}from"./image-DLvXVN1U.js";import{generateVideo as O}from"./video-T6xkJKZ_.js";import{d as fe}from"./useMediaActions-CdIS-dx2.js";import{F as he}from"./VideoCameraIcon-DtFqpigA.js";import"./db-CogJ5b11.js";import"./api-CfjT-eUR.js";function be({title:r,titleId:d,...t},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},t),r?s.createElement("title",{id:d},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const ve=s.forwardRef(be);function je({title:r,titleId:d,...t},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},t),r?s.createElement("title",{id:d},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const P=s.forwardRef(je);function we({title:r,titleId:d,...t},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},t),r?s.createElement("title",{id:d},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const ye=s.forwardRef(we),_e=()=>{const[r,d]=s.useState(""),[t,c]=s.useState("image"),[m,j]=s.useState(null),[x,w]=s.useState(null),[u,p]=s.useState(null),[h,A]=s.useState(null),[b,v]=s.useState(!1),[L,g]=s.useState(null),f=s.useRef(null),[k,$]=s.useState(U),[I,D]=s.useState(te),[y,G]=s.useState(U),[N,V]=s.useState(oe),[M,E]=s.useState(""),[Ne,Ee]=s.useState(""),{addToast:o}=J(),q="mock-user-123",B=a=>{d(a.basePrompt),c("image"),j(null),w(null),o({type:"info",title:"Template Aplicado",message:"Personalize o nome do produto no prompt."})},z=()=>{f.current&&f.current.click()},H=s.useCallback(a=>{var n;const l=(n=a.target.files)==null?void 0:n[0];if(!l)return;j(null),w(null),p(null),A(null),g(null),E("");const i=20;if(l.size>i*1024*1024){o({type:"error",title:"Arquivo muito grande",message:`MÃ¡ximo permitido: ${i}MB.`}),f.current&&(f.current.value="");return}if(!l.type.startsWith("image/")&&!l.type.startsWith("video/")){o({type:"error",title:"Formato invÃ¡lido",message:"Apenas imagens ou vÃ­deos."}),f.current&&(f.current.value="");return}j(l);try{const R=URL.createObjectURL(l);w(R)}catch(R){console.error("Error creating object URL",R),o({type:"error",message:"Erro ao visualizar arquivo."});return}E(l.name.split(".").slice(0,-1).join(".")),l.type.startsWith("image")?c("image"):l.type.startsWith("video")&&c("video")},[o]),S=(a,l)=>{const i=a instanceof Error?a.message:String(a);return i.includes("API key")?"Chave de API invÃ¡lida ou ausente.":i.includes("quota")||i.includes("429")?"Limite de uso da API excedido.":i.includes("safety")||i.includes("block")?"Bloqueado pelos filtros de seguranÃ§a.":`Falha em ${l}: ${i}`},W=s.useCallback(async()=>{if(!r.trim()){o({type:"warning",message:"Insira um prompt para gerar."}),g("A descriÃ§Ã£o (Prompt) Ã© obrigatÃ³ria.");return}v(!0),g(null),p(null),A(null);try{if(t==="image"){const a=await xe(r,{model:le,aspectRatio:k,imageSize:I});if(!a.imageUrl)throw new Error("A API nÃ£o retornou imagem.");p(a.imageUrl)}else{const a=await O(r,{model:_,config:{numberOfVideos:1,resolution:N,aspectRatio:y}});if(!a)throw new Error("A API nÃ£o retornou vÃ­deo.");p(a)}E(`Gerado ${t} - ${r.substring(0,20)}...`),o({type:"success",title:"Sucesso",message:"MÃ­dia gerada com sucesso."})}catch(a){g(S(a,"geraÃ§Ã£o")),o({type:"error",message:"Erro na geraÃ§Ã£o."})}finally{v(!1)}},[r,t,k,I,y,N,o]),Z=s.useCallback(async()=>{if(!m||!x){o({type:"warning",message:"Carregue um arquivo para editar."});return}if(!r.trim()){o({type:"warning",message:"Descreva a ediÃ§Ã£o desejada."});return}v(!0),g(null),p(null);const a=new FileReader;a.onloadend=async()=>{if(typeof a.result!="string")return;const l=a.result.split(",")[1],i=m.type;try{if(t==="image"){const n=await ge(r,l,i,ie);if(!n.imageUrl)throw new Error("Falha na ediÃ§Ã£o da imagem.");p(n.imageUrl)}else{const n=await O(r,{model:_,image:{imageBytes:l,mimeType:i},config:{resolution:N,aspectRatio:y}});if(!n)throw new Error("Falha na ediÃ§Ã£o do vÃ­deo.");p(n)}E(`Editado - ${r.substring(0,20)}`),o({type:"success",message:"EdiÃ§Ã£o concluÃ­da."})}catch(n){g(S(n,"ediÃ§Ã£o")),o({type:"error",message:"Erro na ediÃ§Ã£o."})}finally{v(!1)}},a.readAsDataURL(m)},[m,x,r,t,y,N,o]),X=s.useCallback(async()=>{if(!m){o({type:"warning",message:"Carregue um arquivo para analisar."});return}v(!0),g(null),A(null);const a=new FileReader;a.onloadend=async()=>{if(typeof a.result!="string")return;const l=a.result.split(",")[1],i=r.trim()||"Analise detalhadamente esta imagem/vÃ­deo.";try{const n=await pe(l,m.type,i);A(n),o({type:"success",message:"AnÃ¡lise concluÃ­da."})}catch(n){g(S(n,"anÃ¡lise"))}finally{v(!1)}},a.readAsDataURL(m)},[m,r,o]);return s.useCallback(async()=>{u&&(await fe(u,`vitrinex-creative-${Date.now()}.png`)||o({type:"error",message:"Falha no download."}))},[u,o]),s.useEffect(()=>()=>{x&&URL.revokeObjectURL(x)},[x]),e.jsxs("div",{className:"container mx-auto py-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-title flex items-center gap-3",children:[e.jsx(F,{className:"w-8 h-8 text-primary"}),"EstÃºdio Criativo"]}),e.jsx("p",{className:"text-muted mt-1",children:"Crie, Edite e Analise mÃ­dias com o poder do Gemini 2.5 e Veo."})]})}),L&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"Erro:"})," ",L]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-muted uppercase tracking-wider mb-3",children:"Modelos de Fim de Ano ðŸŽ„"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ne.map(a=>e.jsxs("button",{onClick:()=>B(a),className:"relative group overflow-hidden rounded-xl border border-border hover:border-primary transition-all text-left h-24",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-40 group-hover:opacity-60 transition-opacity duration-500",style:{backgroundImage:`url(${a.referenceImage})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),e.jsxs("div",{className:"relative p-3 z-10 flex flex-col justify-end h-full",children:[e.jsx("div",{className:"text-xl mb-1 filter drop-shadow-lg",children:a.icon}),e.jsx("div",{className:"text-xs font-bold text-white leading-tight drop-shadow-md",children:a.label})]})]},a.id))})]}),e.jsxs("div",{className:"bg-surface p-1 rounded-xl border border-border flex shadow-sm",children:[e.jsxs("button",{onClick:()=>{c("image"),j(null),w(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${t==="image"?"bg-primary text-white shadow-md":"text-muted hover:text-title hover:bg-background"}`,children:[e.jsx(T,{className:"w-4 h-4"})," Imagem"]}),e.jsxs("button",{onClick:()=>{c("video"),j(null),w(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${t==="video"?"bg-primary text-white shadow-md":"text-muted hover:text-title hover:bg-background"}`,children:[e.jsx(he,{className:"w-4 h-4"})," VÃ­deo"]})]}),e.jsxs("div",{onClick:z,className:`border-2 border-dashed rounded-2xl p-8 flex flex-col items-center justify-center transition-all cursor-pointer group relative overflow-hidden
              ${x?"border-primary/50 bg-primary/5":"border-border hover:border-primary hover:bg-background"}`,children:[e.jsx("input",{type:"file",ref:f,onChange:H,accept:t==="image"?"image/*":"video/*",className:"hidden"}),x?e.jsxs("div",{className:"relative w-full h-40 flex items-center justify-center",children:[t==="image"?e.jsx("img",{src:x,alt:"Preview",className:"max-h-full max-w-full object-contain rounded shadow-lg"}):e.jsx("video",{src:x,className:"max-h-full max-w-full rounded shadow-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded",children:e.jsxs("p",{className:"text-white font-medium text-sm flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"})," Trocar Arquivo"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-background rounded-full mb-3 shadow-sm group-hover:scale-110 transition-transform",children:e.jsx(Q,{className:"w-8 h-8 text-primary"})}),e.jsxs("p",{className:"text-sm font-medium text-title",children:["Clique para carregar ",t==="image"?"uma Imagem":"um VÃ­deo"]}),e.jsx("p",{className:"text-xs text-muted mt-1",children:"ou arraste e solte aqui"})]})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 shadow-card",children:[e.jsxs("h3",{className:"text-sm font-bold text-title mb-4 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"})," ConfiguraÃ§Ãµes"]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t==="image"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ProporÃ§Ã£o"}),e.jsx("select",{value:k,onChange:a=>$(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:de.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"Tamanho"}),e.jsx("select",{value:I,onChange:a=>D(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ce.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ProporÃ§Ã£o"}),e.jsx("select",{value:y,onChange:a=>G(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:me.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted font-medium mb-1 block",children:"ResoluÃ§Ã£o"}),e.jsx("select",{value:N,onChange:a=>V(a.target.value),className:"w-full text-sm bg-background border border-border rounded-lg px-2 py-2 text-body focus:ring-1 focus:ring-primary outline-none",children:ue.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})})]}),e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-5 shadow-card",children:[e.jsx(ee,{id:"creativePrompt",label:m?"InstruÃ§Ãµes de EdiÃ§Ã£o / AnÃ¡lise":"DescriÃ§Ã£o para GeraÃ§Ã£o",value:r,onChange:a=>d(a.target.value),rows:4,placeholder:m?"Ex: 'Adicione um filtro neon', 'Remova o fundo', 'Descreva a imagem'":"Ex: 'Um robÃ´ futurista em uma cidade cyberpunk'",className:"text-sm"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:m?e.jsxs(e.Fragment,{children:[e.jsxs(C,{onClick:Z,isLoading:b,variant:"primary",disabled:b,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"})," Editar"]}),e.jsxs(C,{onClick:X,isLoading:b,variant:"outline",disabled:b,children:[e.jsx(P,{className:"w-4 h-4 mr-2"})," Analisar"]})]}):e.jsxs(C,{onClick:W,isLoading:b,variant:"primary",className:"col-span-2",children:[e.jsx(F,{className:"w-4 h-4 mr-2"})," Gerar ",t==="image"?"Imagem":"VÃ­deo"]})})]})]}),e.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full space-y-6",children:[e.jsx("div",{className:"flex-1 bg-surface rounded-2xl border border-border shadow-card overflow-hidden relative flex items-center justify-center min-h-[400px] bg-grid-pattern",children:b&&!u&&!h?e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-12 h-12 text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted animate-pulse",children:"Processando com IA..."})]}):u?t==="image"?e.jsx("img",{src:u,alt:"Result",className:"max-w-full max-h-full object-contain shadow-2xl"}):e.jsx("video",{src:u,controls:!0,className:"max-w-full max-h-full shadow-2xl"}):h?e.jsxs("div",{className:"p-8 max-w-2xl w-full h-full overflow-y-auto",children:[e.jsxs("h3",{className:"text-xl font-bold text-title mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-primary"})," AnÃ¡lise Visual"]}),e.jsx("div",{className:"prose prose-invert max-w-none text-body bg-background/50 p-6 rounded-xl border border-border",children:h})]}):e.jsxs("div",{className:"text-center text-muted opacity-50",children:[e.jsx(T,{className:"w-20 h-20 mx-auto mb-2"}),e.jsx("p",{children:"O resultado aparecerÃ¡ aqui"})]})}),(u||h)&&e.jsxs("div",{className:"bg-surface rounded-xl border border-border p-4 shadow-card flex flex-col md:flex-row items-center justify-between gap-4 animate-slide-in-from-bottom",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsx(ae,{id:"saveName",placeholder:"Nome para salvar...",value:M,onChange:a=>E(a.target.value),className:"mb-0"})}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx(se,{content:u||h,type:h?"text":t,userId:q,initialName:M,tags:["creative-studio",t],variant:"secondary",className:"w-full md:w-auto"}),u&&e.jsx(re,{mediaUrl:u,fileName:"creative.png"})]})]})]})]})]})};export{_e as default};
