import{M as l,D as o}from"./constants-BAIO8zZj.js";const c="vitrinex_mock_db",u={users:{"mock-user-123":{id:"mock-user-123",email:"user@example.com",plan:"premium",businessProfile:o}},posts:{},ads:{},campaigns:{},trends:{},library:{},schedule:{}};function d(){try{const e=localStorage.getItem(c);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load mock DB from local storage",e)}return u}const s=d();function f(){try{localStorage.setItem(c,JSON.stringify(s))}catch(e){console.warn("Failed to save mock DB to local storage",e)}}async function t(e){await new Promise(a=>setTimeout(a,l));const r=await e();return f(),r}const b=async e=>t(()=>{const r=s.users[e];return r||(s.users[e]={id:e,email:"mock-user@vitrinex.com",plan:"free",businessProfile:o},s.users[e])}),y=async(e,r)=>t(()=>{s.users[e]?s.users[e]={...s.users[e],...r}:console.warn(`User profile for ${e} not found (mock).`)}),g=async e=>t(()=>Object.values(s.posts).filter(r=>r.userId===e)),D=async e=>t(()=>Object.values(s.ads).filter(r=>r.userId===e)),h=async e=>t(()=>(e.id||(e.id=`trend-${Date.now()}`),s.trends[e.id]=e,e)),p=async e=>t(()=>Object.values(s.trends).filter(r=>r.userId===e)),v=async e=>t(()=>(e.id||(e.id=`lib-${Date.now()}`),s.library[e.id]=e,e)),O=async(e,r)=>t(()=>{let a=Object.values(s.library).filter(n=>n.userId===e);return r&&r.length>0&&(a=a.filter(n=>r.some(i=>n.tags.includes(i)))),a}),S=async e=>t(()=>{s.library[e]&&delete s.library[e]}),k=async e=>t(()=>(e.id||(e.id=`schedule-${Date.now()}`),s.schedule[e.id]=e,e)),w=async e=>t(()=>Object.values(s.schedule).filter(r=>r.userId===e)),E=async e=>t(()=>{s.schedule[e]&&delete s.schedule[e]});export{D as a,w as b,p as c,v as d,O as e,S as f,g,k as h,E as i,b as j,h as s,y as u};
