import{h as r,k as e,A as G,C as L,B as R,L as U,x as q}from"./index-CYQb2vCA.js";import{T as A}from"./Textarea-NzWuWU9_.js";import{I as m}from"./Input-CqKjf13d.js";import{I as M,V as B,D as V}from"./constants-BAIO8zZj.js";import{g as O,a as D}from"./text-BDHlRMbB.js";import{g as z}from"./image-DLvXVN1U.js";import{generateVideo as Z}from"./video-T6xkJKZ_.js";import{F as K,g as Q}from"./audio-Bbmp6NzQ.js";import{q as F}from"./knowledge-Ccx_Gmnw.js";import{F as T}from"./CommandLineIcon-CwdyxiPx.js";import{F as W}from"./VideoCameraIcon-DtFqpigA.js";import{g as H,u as J}from"./firestore-0QyyegWm.js";import"./api-CfjT-eUR.js";function X({title:s,titleId:n,...i},g){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Y=r.forwardRef(X),ee=()=>{const[s,n]=r.useState("content_generation"),[i,g]=r.useState(!1),[u,v]=r.useState(null),[d,j]=r.useState(null),[x,w]=r.useState(null),[l,c]=r.useState("Explain how AI works in a few words"),[o,y]=r.useState(""),[N,k]=r.useState("1K"),[h,E]=r.useState("Zephyr"),[S,b]=r.useState("720p"),[t,p]=r.useState(localStorage.getItem("vitrinex_kb_name")||""),C=async()=>{g(!0),w(null),v(null),j(null);try{let a="",f=null;switch(s){case"content_generation":t?a=(await F(l)).resposta:a=await O(l);break;case"image_generation":const P=o?`${l}, estilo ${o}`:l,_=await z(P,{imageSize:N});f=_.imageUrl,a=_.text||"Imagem gerada com sucesso.";break;case"audio_generation":await Q(l,h)?a="Áudio gerado. (Reprodução disponível no módulo Audio Tools)":a="Falha ao gerar áudio.";break;case"file_search":if(!t)throw new Error("Nome da Base de Conhecimento é obrigatório para pesquisa.");a=(await F(l)).resposta;break;case"video_generation":const $=o?`${l}, estilo visual ${o}`:l;f=await Z($,{config:{resolution:S}}),a=f?"Vídeo gerado com sucesso.":"Falha na geração do vídeo.";break}v(a),j(f||null)}catch(a){console.error(a),w(a instanceof Error?a.message:String(a))}finally{g(!1)}},I=[{id:"content_generation",label:"Geração de Conteúdo",icon:T},{id:"image_generation",label:"Geração de Imagem",icon:L},{id:"audio_generation",label:"Geração de Áudio",icon:K},{id:"file_search",label:"Pesquisa de Arquivos",icon:Y},{id:"video_generation",label:"Geração de Vídeo",icon:W}];return e.jsxs("div",{className:"bg-lightbg rounded-xl border border-gray-800 shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-darkbg/50 border-b border-gray-800 p-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-accent"}),e.jsx("h3",{className:"font-bold text-textdark",children:"Central de Comando Interativa"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-64 bg-darkbg/30 border-r border-gray-800 p-2 flex flex-row md:flex-col gap-1 overflow-x-auto md:overflow-visible",children:I.map(a=>{const f=a.icon,P=s===a.id;return e.jsxs("button",{onClick:()=>n(a.id),className:`flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${P?"bg-accent text-darkbg shadow-md shadow-accent/20":"text-textmuted hover:bg-white/5 hover:text-white"}`,children:[e.jsx(f,{className:"w-5 h-5"}),a.label]},a.id)})}),e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsx(A,{id:"unifiedPrompt",label:s==="file_search"?"Consulta de Pesquisa":"Prompt / Descrição / Texto",value:l,onChange:a=>c(a.target.value),placeholder:s==="audio_generation"?"Texto para falar...":"Descreva o que você quer...",rows:3}),s==="content_generation"&&e.jsx(m,{id:"kbNameInput",label:"Base de Conhecimento (Opcional)",value:t,onChange:a=>p(a.target.value),placeholder:"Nome da store (ex: meus-docs)"}),(s==="image_generation"||s==="video_generation")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(m,{id:"styleInput",label:"Estilo Visual",value:o,onChange:a=>y(a.target.value),placeholder:"Ex: Futurista, Minimalista, Cyberpunk"}),s==="image_generation"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textlight mb-1",children:"Tamanho"}),e.jsx("select",{value:N,onChange:a=>k(a.target.value),className:"w-full bg-lightbg border border-gray-700 rounded-md px-3 py-2 text-textdark",children:M.map(a=>e.jsx("option",{value:a,children:a},a))})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textlight mb-1",children:"Resolução"}),e.jsx("select",{value:S,onChange:a=>b(a.target.value),className:"w-full bg-lightbg border border-gray-700 rounded-md px-3 py-2 text-textdark",children:B.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),s==="audio_generation"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textlight mb-1",children:"Voz"}),e.jsx("select",{value:h,onChange:a=>E(a.target.value),className:"w-full bg-lightbg border border-gray-700 rounded-md px-3 py-2 text-textdark",children:["Zephyr","Puck","Charon","Kore","Fenrir"].map(a=>e.jsx("option",{value:a,children:a},a))})]})}),s==="file_search"&&e.jsx(m,{id:"kbNameSearch",label:"Nome da Base de Conhecimento (Obrigatório)",value:t,onChange:a=>p(a.target.value)}),e.jsx(R,{onClick:C,isLoading:i,variant:"primary",className:"w-full",disabled:!l,children:"Executar Ação"})]}),(u||d||x)&&e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800 animate-in slide-in-from-bottom-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-textmuted uppercase tracking-wider mb-4",children:"Resultado"}),x&&e.jsx("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-lg text-red-300 mb-4",children:x}),d&&e.jsx("div",{className:"mb-6 rounded-lg overflow-hidden border border-gray-700 bg-black/50 flex justify-center",children:s==="image_generation"?e.jsx("img",{src:d,alt:"Generated",className:"max-h-96 w-auto object-contain"}):e.jsx("video",{src:d,controls:!0,className:"max-h-96 w-full"})}),u&&e.jsx("div",{className:"p-4 bg-darkbg rounded-lg border border-gray-700 text-textlight font-mono text-sm whitespace-pre-wrap max-h-64 overflow-y-auto",children:u})]})]})})]})]})},pe=()=>{const[s,n]=r.useState("command"),[i,g]=r.useState(""),[u,v]=r.useState(null),[d,j]=r.useState([]),[x,w]=r.useState(!1),[l,c]=r.useState(null),[o,y]=r.useState(V),[N,k]=r.useState(!0),h="mock-user-123",E=r.useCallback(async()=>{k(!0);try{const t=await H(h);t&&y(t.businessProfile)}catch(t){console.error("Failed to fetch user profile:",t),c("Falha ao carregar o perfil do negócio. Por favor, atualize-o em Configurações.")}finally{k(!1)}},[]);r.useEffect(()=>{E()},[]);const S=r.useCallback(async()=>{if(!i.trim()){c("Por favor, insira um prompt para gerar uma estratégia.");return}w(!0),c(null),v(null),j([]);try{const t=await D(i,o);v(t.strategyText),j(t.suggestions)}catch(t){console.error("Error generating strategy:",t),c(`Falha ao gerar estratégia: ${t instanceof Error?t.message:String(t)}`)}finally{w(!1)}},[i,o]),b=r.useCallback(async(t,p)=>{const C={...o,[t]:p};y(C);try{await J(h,{businessProfile:C})}catch(I){console.error("Failed to update business profile for AI Manager:",I),c("Falha ao salvar as alterações do perfil para o Gerente de IA. Isso pode afetar futuras gerações.")}},[o,h]);return N?e.jsxs("div",{className:"flex justify-center items-center h-48",children:[e.jsx(U,{}),e.jsx("p",{className:"ml-2 text-textlight",children:"Carregando perfil do negócio..."})]}):e.jsxs("div",{className:"container mx-auto py-8 lg:py-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-textdark",children:"Gerente de IA"}),e.jsxs("div",{className:"flex bg-lightbg rounded-lg p-1 border border-gray-800",children:[e.jsxs("button",{onClick:()=>n("command"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${s==="command"?"bg-accent text-darkbg shadow-sm":"text-textlight hover:text-white"}`,children:[e.jsx(T,{className:"w-4 h-4"}),"Central de Comando"]}),e.jsxs("button",{onClick:()=>n("strategy"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${s==="strategy"?"bg-accent text-darkbg shadow-sm":"text-textlight hover:text-white"}`,children:[e.jsx(q,{className:"w-4 h-4"}),"Estratégia & Diagnóstico"]})]})]}),l&&e.jsxs("div",{className:"bg-red-900 border border-red-600 text-red-300 px-4 py-3 rounded relative mb-8",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Erro!"}),e.jsxs("span",{className:"block sm:inline",children:[" ",l]})]}),s==="command"&&e.jsxs("div",{className:"animate-slide-in-from-bottom duration-500",children:[e.jsx(ee,{}),e.jsx("p",{className:"text-center text-textmuted text-sm mt-6",children:"Use a Central de Comando para executar ações rápidas em qualquer módulo do sistema sem sair desta tela."})]}),s==="strategy"&&e.jsxs("div",{className:"animate-slide-in-from-bottom duration-500 space-y-8",children:[e.jsxs("div",{className:"bg-lightbg p-6 rounded-lg shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-xl font-semibold text-textlight mb-5",children:"Informações do Negócio (Contexto)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(m,{id:"businessName",label:"Nome da Empresa",value:o.name,onChange:t=>b("name",t.target.value)}),e.jsx(m,{id:"industry",label:"Indústria",value:o.industry,onChange:t=>b("industry",t.target.value)}),e.jsx(m,{id:"targetAudience",label:"Público-alvo",value:o.targetAudience,onChange:t=>b("targetAudience",t.target.value)}),e.jsx(m,{id:"visualStyle",label:"Estilo Visual",value:o.visualStyle,onChange:t=>b("visualStyle",t.target.value)})]})]}),e.jsxs("div",{className:"bg-lightbg p-6 rounded-lg shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-xl font-semibold text-textlight mb-5",children:"Solicitação Estratégica"}),e.jsx(A,{id:"aiManagerPrompt",label:"Qual é o seu desafio de marketing atual?",value:i,onChange:t=>g(t.target.value),rows:6,placeholder:"Ex: 'Quero um diagnóstico completo do meu marketing digital e ideias para uma campanha de lançamento.'"}),e.jsx(R,{onClick:S,isLoading:x,variant:"primary",className:"w-full md:w-auto mt-4",children:x?"Gerando Estratégia...":"Gerar Estratégia"})]}),u&&e.jsxs("div",{className:"bg-lightbg p-6 rounded-lg shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-xl font-semibold text-textlight mb-5",children:"Plano Gerado"}),e.jsx("div",{className:"prose max-w-none text-textlight leading-relaxed mb-6",style:{whiteSpace:"pre-wrap"},children:u}),d.length>0&&e.jsxs("div",{className:"mt-6 border-t border-gray-800 pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-textlight mb-4",children:"Sugestões Acionáveis:"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.map((t,p)=>e.jsxs("li",{className:"bg-darkbg p-3 rounded border border-gray-700 text-sm text-textlight flex items-start gap-2",children:[e.jsx("span",{className:"text-accent",children:"•"})," ",t]},p))})]})]})]})]})};export{pe as default};
