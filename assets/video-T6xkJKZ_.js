import{g as u}from"./constants-BAIO8zZj.js";import{K as n}from"./index-CYQb2vCA.js";import{p as E}from"./api-CfjT-eUR.js";const O=async(c,e)=>{var l,g,m,f;try{return(await E("generate-video","POST",{prompt:c,model:(e==null?void 0:e.model)||u,videoConfig:e==null?void 0:e.config,...e})).videoUri}catch(t){console.warn("Backend proxy failed for generateVideo, falling back to client-side SDK.",t);const i=await n(),r={model:(e==null?void 0:e.model)||u,prompt:c,image:e==null?void 0:e.image,lastFrame:e==null?void 0:e.lastFrame,config:e==null?void 0:e.config};Object.keys(r).forEach(d=>r[d]===void 0&&delete r[d]);let a=await i.models.generateVideos(r);for(;!a.done;)await new Promise(d=>setTimeout(d,5e3)),a=await i.operations.getVideosOperation({operation:a});const w=(f=(m=(g=(l=a.response)==null?void 0:l.generatedVideos)==null?void 0:g[0])==null?void 0:m.video)==null?void 0:f.uri;if(!w)throw new Error("Video generated but no URI returned in fallback.");return w}};export{O as generateVideo};
